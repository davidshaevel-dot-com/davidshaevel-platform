# Example Terraform Variables for Development Environment
# Copy this file to terraform.tfvars and update with your actual values
#
# IMPORTANT: Never commit terraform.tfvars to Git (it's in .gitignore)
# This file contains only example/placeholder values

# -----------------------------------------------------------------------------
# Project Configuration
# -----------------------------------------------------------------------------

project_name = "myproject"
environment  = "dev"

# -----------------------------------------------------------------------------
# AWS Configuration
# -----------------------------------------------------------------------------

aws_region     = "us-east-1"
aws_account_id = "123456789012"  # Replace with your AWS account ID

# -----------------------------------------------------------------------------
# Domain Configuration
# -----------------------------------------------------------------------------

domain_name = "example.com"  # Replace with your domain

# -----------------------------------------------------------------------------
# Repository Configuration
# -----------------------------------------------------------------------------

repository_name = "myproject-platform"

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------

# RDS instance configuration
db_instance_class      = "db.t3.micro"
db_allocated_storage   = 20
db_max_allocated_storage = 100
db_name                = "myproject"
db_master_username     = "dbadmin"

# High availability and protection settings
db_multi_az            = false  # Set to true for production
db_deletion_protection = false  # Set to true for production

# -----------------------------------------------------------------------------
# Container Image Configuration
# -----------------------------------------------------------------------------

# Backend container image (must specify explicit tag, not :latest)
# Format: <account-id>.dkr.ecr.<region>.amazonaws.com/<project-name>/backend:<git-sha>
# Example: 123456789012.dkr.ecr.us-east-1.amazonaws.com/myproject/backend:f00ba12
backend_container_image = "123456789012.dkr.ecr.us-east-1.amazonaws.com/myproject/backend:abc1234"

# Frontend container image (must specify explicit tag, not :latest)
# Format: <account-id>.dkr.ecr.<region>.amazonaws.com/<project-name>/frontend:<git-sha>
frontend_container_image = "123456789012.dkr.ecr.us-east-1.amazonaws.com/myproject/frontend:abc1234"

# -----------------------------------------------------------------------------
# Prometheus Observability Configuration
# -----------------------------------------------------------------------------

# Enable ECS Exec for debugging Prometheus tasks (allows shell access via AWS CLI)
# WARNING: Only enable this in development environments for debugging purposes
# Requires AWS Session Manager plugin installed locally
# Set to false for production environments
enable_prometheus_ecs_exec = false

# -----------------------------------------------------------------------------
# Backend/Frontend ECS Exec Configuration
# -----------------------------------------------------------------------------

# Enable ECS Exec for debugging backend tasks (allows shell access via AWS CLI)
# Useful for testing service discovery DNS resolution, network connectivity, etc.
# WARNING: Only enable in development environments for debugging purposes
# Requires AWS Session Manager plugin installed locally
# Set to false for production environments
enable_backend_ecs_exec = false

# Enable ECS Exec for debugging frontend tasks (allows shell access via AWS CLI)
# WARNING: Only enable in development environments for debugging purposes
# Requires AWS Session Manager plugin installed locally
# Set to false for production environments
enable_frontend_ecs_exec = false

# Enable Node.js Inspector for remote debugging via Chrome DevTools
# Sets NODE_OPTIONS="--inspect=0.0.0.0:9229" in the backend container
# WARNING: Only enable TEMPORARILY for debugging sessions, then disable immediately
# The Inspector protocol has NO authentication - anyone with network access can connect
# Use with SSM port forwarding (Part 3 of TT-63 lab documentation)
enable_backend_inspector = false

# -----------------------------------------------------------------------------
# Lab Endpoints Configuration (TT-63 Node.js Profiling Lab)
# -----------------------------------------------------------------------------

# Enable lab endpoints for profiling/debugging
# WARNING: Only enable in development/staging environments
# These endpoints allow CPU profiling, heap snapshots, and memory leak simulation
# NEVER enable in production without LAB_ALLOW_PROD (handled automatically by Terraform)
lab_enable = false

# Authentication token for lab endpoints
# Generate a secure random token: openssl rand -hex 32
# This token must be passed in the x-lab-token header to access lab endpoints
lab_token = "your-secure-random-token-here"

# -----------------------------------------------------------------------------
# Profiling Artifacts Configuration
# -----------------------------------------------------------------------------

# Enable S3 bucket for exporting profiling artifacts (CPU profiles, heap snapshots)
# When enabled, creates an S3 bucket with 7-day lifecycle and adds permissions
# to the backend task role for uploading artifacts via ECS Exec
# Use with scripts/export-backend-ecs-artifact.sh to download profiles locally
enable_profiling_artifacts_bucket = false

# -----------------------------------------------------------------------------
# Additional Tags (Optional)
# -----------------------------------------------------------------------------

tags = {
  Owner       = "Your Name"
  CostCenter  = "Engineering"
  Terraform   = "true"
}
